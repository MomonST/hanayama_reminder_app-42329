<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>èŠ±å±±ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ - è¦‹é ƒã®èŠ±ã‚’è¦‹é€ƒã•ãªã„</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="ã‚ãªãŸã®è¡ŒããŸã„ã‚¨ãƒªã‚¢ã®é«˜å±±æ¤ç‰©ã®é–‹èŠ±æ™‚æœŸã‚’äº‹å‰ã«ãŠçŸ¥ã‚‰ã›ã€‚å¿™ã—ã„æ—¥å¸¸ã§ã‚‚ã€æœ€é«˜ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å±±ã®èŠ±ã«å‡ºä¼šãˆã¾ã™ã€‚">
    <meta name="keywords" content="èŠ±,å±±,ç™»å±±,é«˜å±±æ¤ç‰©,é–‹èŠ±,é€šçŸ¥,ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼">
    
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ¸</text></svg>">
    
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Stylesheets -->
    <%= stylesheet_link_tag 'application', 'data-turbolinks-track': 'reload' %>
    
    <!-- JavaScript -->
    <%= javascript_importmap_tags %>

    <!-- Google Maps API -->
    <% if content_for?(:use_google_maps) %>
      <script>window.mapData = <%= raw @map_data.to_json if defined?(@map_data) && @map_data.present? %>;</script>
      <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&callback=initMap&libraries=places" async defer>
      </script>
    <% end %>
    
  </head>

  <body class="gradient-bg">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <%= render 'shared/header' %>
    
    <!-- é€šçŸ¥ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å‰ã®ã¿ï¼‰ -->
    <% unless user_signed_in? %>
      <%= render 'shared/notification_popup' %>
    <% end %>
    
    <!-- ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="alert-container" class="position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>
    
    <!-- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <% if notice %>
      <div class="alert alert-success alert-dismissible fade show m-3" role="alert">
        <i class="bi bi-check-circle me-2"></i>
        <%= notice %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <% end %>
    
    <% if alert %>
      <div class="alert alert-danger alert-dismissible fade show m-3" role="alert">
        <i class="bi bi-exclamation-triangle me-2"></i>
        <%= alert %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <% end %>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="container-fluid px-3 px-md-4 py-4">
      <%= yield %>
    </main>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <%= render 'shared/footer' %>
    
    <!-- ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ -->
    <button id="page-top" class="btn btn-success position-fixed bottom-0 end-0 m-4 rounded-circle d-none" style="width: 50px; height: 50px; z-index: 1000;" onclick="smoothScrollTo('body')">
      <i class="bi bi-arrow-up"></i>
    </button>
    
    <script>
      // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºåˆ¶å¾¡
      window.addEventListener('scroll', function() {
        const pageTop = document.getElementById('page-top');
        if (window.scrollY > 300) {
          pageTop.classList.remove('d-none');
        } else {
          pageTop.classList.add('d-none');
        }
      });
    </script>
  </body>
</html>